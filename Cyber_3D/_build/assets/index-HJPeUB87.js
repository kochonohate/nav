import{H as ft,b as z,y as xt,A as ht,z as T,f as $t,s as mt,j as Fe,h as oe,e as q,I as vt,J as _t,i as w,t as C,w as v,l as c,m as he,r as G,K as Le,L as xe,M as I,N as se,O as Ke,P as ne,S as Ee}from"./web-CjqymgTR.js";const We=xt(),pt=["title","meta"],Ye=[],je=["name","http-equiv","content","charset","media"].concat(["property"]),Xe=(e,r)=>{const n=Object.fromEntries(Object.entries(e.props).filter(([s])=>r.includes(s)).sort());return(Object.hasOwn(n,"name")||Object.hasOwn(n,"property"))&&(n.name=n.name||n.property,delete n.property),e.tag+JSON.stringify(n)};function yt(){if(!mt.context){const n=document.head.querySelectorAll("[data-sm]");Array.prototype.forEach.call(n,s=>s.parentNode.removeChild(s))}const e=new Map;function r(n){if(n.ref)return n.ref;let s=document.querySelector(`[data-sm="${n.id}"]`);return s?(s.tagName.toLowerCase()!==n.tag&&(s.parentNode&&s.parentNode.removeChild(s),s=document.createElement(n.tag)),s.removeAttribute("data-sm")):s=document.createElement(n.tag),s}return{addTag(n){if(pt.indexOf(n.tag)!==-1){const m=n.tag==="title"?Ye:je,g=Xe(n,m);e.has(g)||e.set(g,[]);let f=e.get(g),M=f.length;f=[...f,n],e.set(g,f);let _=r(n);n.ref=_,Fe(_,n.props);let B=null;for(var s=M-1;s>=0;s--)if(f[s]!=null){B=f[s];break}return _.parentNode!=document.head&&document.head.appendChild(_),B&&B.ref&&B.ref.parentNode&&document.head.removeChild(B.ref),M}let h=r(n);return n.ref=h,Fe(h,n.props),h.parentNode!=document.head&&document.head.appendChild(h),-1},removeTag(n,s){const h=n.tag==="title"?Ye:je,m=Xe(n,h);if(n.ref){const g=e.get(m);if(g){if(n.ref.parentNode){n.ref.parentNode.removeChild(n.ref);for(let f=s-1;f>=0;f--)g[f]!=null&&document.head.appendChild(g[f].ref)}g[s]=null,e.set(m,g)}else n.ref.parentNode&&n.ref.parentNode.removeChild(n.ref)}}}}const St=e=>{const r=yt();return z(We.Provider,{value:r,get children(){return e.children}})},wt=(e,r,n)=>(Ct({tag:e,props:r,setting:n,id:ft(),get name(){return r.name||r.property}}),null);function Ct(e){const r=ht(We);if(!r)throw new Error("<MetaProvider /> should be in the tree");T(()=>{const n=r.addTag(e);$t(()=>r.removeTag(e,n))})}const kt=e=>wt("title",e,{escape:!0,close:!0});var Et=C('<div class=relative><div class="flex justify-between items-center mb-4"><div class="text-sm text-gray-400">Mouse: <!$><!/>, <!$><!/><!$><!/></div><button class="bg-gradient-to-r from-neon-green to-hologram-cyan text-black font-bold py-2 px-4 rounded-lg hover:scale-105 transition-transform">Export PNG</button></div><div class="canvas-container rounded-xl overflow-hidden border-2 border-hologram-cyan/30 shadow-[0_0_30px_rgba(0,255,255,0.3)]"><canvas class="w-full h-auto cursor-crosshair"></canvas></div><div class="mt-4 text-xs text-gray-400 space-y-1"><p>• Click to select text elements</p><p>• Drag to move selected elements</p><p>• Double-click to edit text</p><p>• Use arrow keys to fine-tune position</p><p>• Press Delete to remove selected element'),Tt=C('<span class="ml-4 text-hologram-cyan">Selected: <!$><!/>');function Pt(e){let r,n;const[s,h]=q({x:0,y:0}),m=()=>{const t=r,l=t.getContext("2d");if(!l)return;t.width=e.canvasSize.width,t.height=e.canvasSize.height,l.clearRect(0,0,t.width,t.height);const a=l.createRadialGradient(t.width/2,t.height/2,0,t.width/2,t.height/2,Math.max(t.width,t.height)/2);a.addColorStop(0,e.backgroundColor),a.addColorStop(1,M(e.backgroundColor,-40)),l.fillStyle=a,l.fillRect(0,0,t.width,t.height),g(l,t.width,t.height);const u=e.textElements.filter(i=>i.isBackground),x=e.textElements.filter(i=>!i.isBackground);[...u,...x].forEach(i=>{f(l,i)})},g=(t,l,a)=>{t.strokeStyle=`${e.backgroundColor}40`,t.lineWidth=1;const u=50;for(let i=0;i<=l;i+=u)t.beginPath(),t.moveTo(i,0),t.lineTo(i,a),t.stroke();for(let i=0;i<=a;i+=u)t.beginPath(),t.moveTo(0,i),t.lineTo(l,i),t.stroke();[{x:l*.2,y:a*.3,radius:100,color:"#FF149350"},{x:l*.8,y:a*.7,radius:80,color:"#00FFFF30"},{x:l*.6,y:a*.2,radius:60,color:"#8A2BE230"}].forEach(i=>{const R=t.createRadialGradient(i.x,i.y,0,i.x,i.y,i.radius);R.addColorStop(0,i.color),R.addColorStop(1,"transparent"),t.fillStyle=R,t.fillRect(i.x-i.radius,i.y-i.radius,i.radius*2,i.radius*2)})},f=(t,l)=>{if(t.save(),t.translate(l.x,l.y),t.rotate(l.rotation*Math.PI/180),t.globalAlpha=l.opacity,t.font=`${l.fontWeight} ${l.fontSize}px Orbitron, monospace`,t.textAlign="center",t.textBaseline="middle",l.isBackground&&l.blur>0?t.filter=`blur(${l.blur}px)`:t.filter="none",!l.isBackground&&l.shadowBlur>0&&(t.shadowColor=l.shadowColor,t.shadowOffsetX=l.shadowOffsetX,t.shadowOffsetY=l.shadowOffsetY,t.shadowBlur=l.shadowBlur),t.fillStyle=l.color,t.fillText(l.text,0,0),e.selectedElement===l.id){t.filter="none",t.shadowColor="transparent",t.strokeStyle="#00FFFF",t.lineWidth=2,t.setLineDash([5,5]);const u=t.measureText(l.text).width,x=l.fontSize;t.strokeRect(-u/2-10,-x/2-10,u+20,x+20),t.setLineDash([])}t.restore()},M=(t,l)=>{const a=t.replace("#",""),u=Math.max(0,Math.min(255,parseInt(a.substr(0,2),16)+l)),x=Math.max(0,Math.min(255,parseInt(a.substr(2,2),16)+l)),i=Math.max(0,Math.min(255,parseInt(a.substr(4,2),16)+l));return`#${u.toString(16).padStart(2,"0")}${x.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`},_=(t,l)=>{const a=[...e.textElements].reverse();for(const u of a){const i=r.getContext("2d");if(!i)continue;i.font=`${u.fontWeight} ${u.fontSize}px Orbitron, monospace`;const N=i.measureText(u.text).width,b=u.fontSize,d=u.x-N/2,o=u.x+N/2,y=u.y-b/2,S=u.y+b/2;if(t>=d&&t<=o&&l>=y&&l<=S)return u}return null},B=t=>{const l=r.getBoundingClientRect(),a=t.clientX-l.left,u=t.clientY-l.top,x=_(a,u);x?(e.onElementSelect(x.id),e.setIsDragging(!0),e.setDragOffset({x:a-x.x,y:u-x.y})):e.onElementSelect(null)},j=t=>{const l=r.getBoundingClientRect(),a=t.clientX-l.left,u=t.clientY-l.top;if(h({x:a,y:u}),e.isDragging&&e.selectedElement){const x=a-e.dragOffset.x,i=u-e.dragOffset.y;e.onElementUpdate(e.selectedElement,{x,y:i})}},k=()=>{e.setIsDragging(!1)},p=t=>{if(e.selectedElement)switch(t.key){case"Delete":case"Backspace":e.onElementDelete(e.selectedElement);break;case"ArrowUp":t.preventDefault(),e.onElementUpdate(e.selectedElement,{y:e.textElements.find(l=>l.id===e.selectedElement).y-(t.shiftKey?10:1)});break;case"ArrowDown":t.preventDefault(),e.onElementUpdate(e.selectedElement,{y:e.textElements.find(l=>l.id===e.selectedElement).y+(t.shiftKey?10:1)});break;case"ArrowLeft":t.preventDefault(),e.onElementUpdate(e.selectedElement,{x:e.textElements.find(l=>l.id===e.selectedElement).x-(t.shiftKey?10:1)});break;case"ArrowRight":t.preventDefault(),e.onElementUpdate(e.selectedElement,{x:e.textElements.find(l=>l.id===e.selectedElement).x+(t.shiftKey?10:1)});break}},O=()=>{const t=document.createElement("a");t.download="3d-poster.png",t.href=r.toDataURL(),t.click()};return vt(()=>(m(),document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)})),_t(()=>{m()}),(()=>{var t=w(Et),l=t.firstChild,a=l.firstChild,u=a.firstChild,x=u.nextSibling,[i,R]=v(x.nextSibling),N=i.nextSibling,b=N.nextSibling,[d,o]=v(b.nextSibling),y=d.nextSibling,[S,A]=v(y.nextSibling),X=a.nextSibling,D=l.nextSibling,E=D.firstChild,F=n;typeof F=="function"?Le(F,t):n=t,c(a,()=>s().x,i,R),c(a,()=>s().y,d,o),c(a,(()=>{var V=he(()=>!!e.selectedElement);return()=>V()&&(()=>{var J=w(Tt),te=J.firstChild,Q=te.nextSibling,[$,L]=v(Q.nextSibling);return c(J,()=>e.textElements.find(Z=>Z.id===e.selectedElement)?.text,$,L),J})()})(),S,A),X.$$click=O,E.$$mouseup=k,E.$$mousemove=j,E.$$mousedown=B;var K=r;return typeof K=="function"?Le(K,E):r=E,E.style.setProperty("max-width","100%"),E.style.setProperty("height","auto"),G(),t})()}oe(["click","mousedown","mousemove","mouseup"]);var Bt=C('<div class=relative><div class="flex items-center space-x-2"><button class="w-10 h-10 rounded-lg border-2 border-gray-500 hover:border-white transition-colors shadow-lg"></button><input type=color class="w-10 h-10 rounded-lg border-2 border-gray-500 hover:border-white transition-colors cursor-pointer"><input type=text class="flex-1 px-3 py-2 bg-slate-800/50 border border-slate-600 rounded text-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"placeholder=#000000></div><!$><!/>'),Ot=C('<div class="absolute top-12 left-0 z-50 p-4 bg-slate-800 border border-slate-600 rounded-lg shadow-xl"><div class="grid grid-cols-6 gap-2 mb-3"></div><button class="w-full py-2 px-4 bg-slate-700 hover:bg-slate-600 text-white text-sm rounded transition-colors">关闭'),Dt=C('<button class="w-8 h-8 rounded border-2 border-gray-500 hover:border-white transition-colors">');function Te(e){const[r,n]=q(!1),s=["#3b82f6","#ec4899","#10b981","#f59e0b","#8b5cf6","#ef4444","#06b6d4","#84cc16","#6366f1","#f97316","#14b8a6","#eab308","#a855f7","#f43f5e","#0ea5e9","#65a30d","#ffffff","#e5e7eb","#9ca3af","#6b7280","#374151","#1f2937","#111827","#000000"];return(()=>{var h=w(Bt),m=h.firstChild,g=m.firstChild,f=g.nextSibling,M=f.nextSibling,_=m.nextSibling,[B,j]=v(_.nextSibling);return g.$$click=()=>n(!r()),f.$$input=k=>e.onChange(k.currentTarget.value),M.$$input=k=>{const p=k.currentTarget.value;/^#[0-9A-Fa-f]{6}$/.test(p)&&e.onChange(p)},c(h,(()=>{var k=he(()=>!!r());return()=>k()&&(()=>{var p=w(Ot),O=p.firstChild,t=O.nextSibling;return c(O,()=>s.map(l=>(()=>{var a=w(Dt);return a.$$click=()=>{e.onChange(l),n(!1)},l!=null?a.style.setProperty("background-color",l):a.style.removeProperty("background-color"),xe(a,"title",l),G(),a})())),t.$$click=()=>n(!1),G(),p})()})(),B,j),T(k=>{var p=e.color,O=`当前颜色: ${e.color}`;return p!==k.e&&((k.e=p)!=null?g.style.setProperty("background-color",p):g.style.removeProperty("background-color")),O!==k.t&&xe(g,"title",k.t=O),k},{e:void 0,t:void 0}),T(()=>I(f,"value",e.color)),T(()=>I(M,"value",e.color)),G(),h})()}oe(["click","input"]);var Mt=C('<div class=space-y-6><div class="glass-panel p-4"><h3 class="text-lg font-cyber font-bold text-soft-blue mb-4">画布设置</h3><div class=space-y-4><div><label class="block text-sm font-medium text-gray-300 mb-2">画布尺寸</label><div class="grid grid-cols-2 gap-2"><input type=number class="px-3 py-2 bg-slate-800/50 border border-slate-600 rounded text-white text-sm focus:border-blue-500"placeholder=宽度><input type=number class="px-3 py-2 bg-slate-800/50 border border-slate-600 rounded text-white text-sm focus:border-blue-500"placeholder=高度></div></div><div><label class="block text-sm font-medium text-gray-300 mb-2">背景颜色</label><!$><!/></div></div></div><div class="glass-panel p-4"><h3 class="text-lg font-cyber font-bold text-soft-blue mb-4">操作</h3><div class=space-y-3><button class="w-full cyber-button flex items-center justify-center space-x-2"><span>➕</span><span>添加文字</span></button><button class="w-full bg-gradient-to-r from-lime-600 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 shadow-[0_0_15px_rgba(34,197,94,0.3)] hover:shadow-[0_0_25px_rgba(34,197,94,0.5)]">💾 导出图片</button><button class="w-full bg-gradient-to-r from-red-600 to-rose-600 text-white font-bold py-3 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 shadow-[0_0_15px_rgba(239,68,68,0.3)] hover:shadow-[0_0_25px_rgba(239,68,68,0.5)]">🗑️ 清空所有</button></div></div><div class="glass-panel p-4"><h3 class="text-lg font-cyber font-bold text-soft-blue mb-4">颜色预设</h3><div class="grid grid-cols-1 gap-2">'),At=C('<button class="flex items-center space-x-3 p-3 rounded-lg border border-slate-600 bg-slate-800/30 hover:bg-slate-700/50 transition-all duration-200 group"><div class="flex space-x-1"><div class="w-4 h-4 rounded border border-gray-500"></div><div class="w-4 h-4 rounded border border-gray-500"></div></div><span class="text-sm text-gray-300 group-hover:text-white">');function Ut(e){return(()=>{var r=w(Mt),n=r.firstChild,s=n.firstChild,h=s.nextSibling,m=h.firstChild,g=m.firstChild,f=g.nextSibling,M=f.firstChild,_=M.nextSibling,B=m.nextSibling,j=B.firstChild,k=j.nextSibling,[p,O]=v(k.nextSibling),t=n.nextSibling,l=t.firstChild,a=l.nextSibling,u=a.firstChild,x=u.nextSibling,i=x.nextSibling,R=t.nextSibling,N=R.firstChild,b=N.nextSibling;return M.$$input=d=>e.onCanvasSizeChange({...e.canvasSize,width:parseInt(d.currentTarget.value)||800}),_.$$input=d=>e.onCanvasSizeChange({...e.canvasSize,height:parseInt(d.currentTarget.value)||600}),c(B,z(Te,{get color(){return e.backgroundColor},get onChange(){return e.onBackgroundColorChange}}),p,O),se(u,"click",e.onAddText,!0),se(x,"click",e.onExport,!0),se(i,"click",e.onClearAll,!0),c(b,z(Ke,{get each(){return e.colorPresets},children:d=>(()=>{var o=w(At),y=o.firstChild,S=y.firstChild,A=S.nextSibling,X=y.nextSibling;return o.$$click=()=>e.onApplyPreset(d),c(X,()=>d.name),T(D=>{var E=d.bg,F=d.fg;return E!==D.e&&((D.e=E)!=null?S.style.setProperty("background-color",E):S.style.removeProperty("background-color")),F!==D.t&&((D.t=F)!=null?A.style.setProperty("background-color",F):A.style.removeProperty("background-color")),D},{e:void 0,t:void 0}),G(),o})()})),T(()=>I(M,"value",e.canvasSize.width)),T(()=>I(_,"value",e.canvasSize.height)),G(),r})()}oe(["input","click"]);var zt=C('<div class="glass-panel p-4 space-y-4"><div class="flex items-center justify-between"><h3 class="text-lg font-cyber font-bold text-soft-blue flex items-center space-x-2"><span></span><span></span></h3><div class="flex space-x-2"><button class="text-blue-400 hover:text-blue-300 transition-colors"title=复制>📋</button><button class="text-red-400 hover:text-red-300 transition-colors"title=删除>🗑️</button></div></div><div><label class="block text-sm font-medium text-gray-300 mb-2">文字内容</label><input type=text class="w-full px-3 py-2 bg-slate-800/50 border border-slate-600 rounded text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"></div><div><label class="block text-sm font-medium text-gray-300 mb-2">文字颜色</label><!$><!/></div><div><label class="block text-sm font-medium text-gray-300 mb-2">字体大小: <!$><!/>px</label><input type=range min=20 max=200 class="w-full cyber-slider"></div><div><label class="block text-sm font-medium text-gray-300 mb-2">字体粗细: <!$><!/></label><input type=range min=100 max=900 step=100 class="w-full cyber-slider"></div><div><label class="block text-sm font-medium text-gray-300 mb-2">透明度: <!$><!/>%</label><input type=range min=0 max=1 step=0.1 class="w-full cyber-slider"></div><div><label class="block text-sm font-medium text-gray-300 mb-2">旋转角度: <!$><!/>°</label><input type=range min=-180 max=180 class="w-full cyber-slider"></div><button class="w-full py-2 px-4 bg-slate-700/50 hover:bg-slate-600/50 border border-slate-600 rounded-lg text-gray-300 transition-colors flex items-center justify-center space-x-2"><span></span><span>高级设置</span></button><!$><!/>'),It=C('<div class="space-y-4 pt-4 border-t border-slate-600"><div><label class="block text-sm font-medium text-gray-300 mb-2">模糊效果: <!$><!/>px</label><input type=range min=0 max=10 step=0.1 class="w-full cyber-slider"></div><div class=space-y-3><h4 class="text-sm font-medium text-gray-300">阴影设置</h4><div><label class="block text-xs text-gray-400 mb-1">阴影颜色</label><!$><!/></div><div><label class="block text-xs text-gray-400 mb-1">水平偏移: <!$><!/>px</label><input type=range min=-20 max=20 class="w-full cyber-slider"></div><div><label class="block text-xs text-gray-400 mb-1">垂直偏移: <!$><!/>px</label><input type=range min=-20 max=20 class="w-full cyber-slider"></div><div><label class="block text-xs text-gray-400 mb-1">阴影模糊: <!$><!/>px</label><input type=range min=0 max=30 class="w-full cyber-slider"></div></div><div class=space-y-2><h4 class="text-sm font-medium text-gray-300">快速样式</h4><div class="grid grid-cols-2 gap-2"><button class="px-3 py-2 text-xs bg-blue-500/20 border border-blue-500/50 rounded text-blue-300 hover:bg-blue-500/30 transition-colors">🌫️ 背景样式</button><button class="px-3 py-2 text-xs bg-purple-500/20 border border-purple-500/50 rounded text-purple-300 hover:bg-purple-500/30 transition-colors">✨ 前景样式</button></div></div><div class=space-y-2><h4 class="text-sm font-medium text-gray-300">颜色预设</h4><div class="grid grid-cols-4 gap-2">'),Rt=C('<button class="w-8 h-8 rounded border-2 border-gray-500 hover:border-white transition-colors">');function Nt(e){const[r,n]=q(!1);return(()=>{var s=w(zt),h=s.firstChild,m=h.firstChild,g=m.firstChild,f=g.nextSibling,M=m.nextSibling,_=M.firstChild,B=_.nextSibling,j=h.nextSibling,k=j.firstChild,p=k.nextSibling,O=j.nextSibling,t=O.firstChild,l=t.nextSibling,[a,u]=v(l.nextSibling),x=O.nextSibling,i=x.firstChild,R=i.firstChild,N=R.nextSibling,[b,d]=v(N.nextSibling);b.nextSibling;var o=i.nextSibling,y=x.nextSibling,S=y.firstChild,A=S.firstChild,X=A.nextSibling,[D,E]=v(X.nextSibling),F=S.nextSibling,K=y.nextSibling,V=K.firstChild,J=V.firstChild,te=J.nextSibling,[Q,$]=v(te.nextSibling);Q.nextSibling;var L=V.nextSibling,Z=K.nextSibling,ee=Z.firstChild,ie=ee.firstChild,P=ie.nextSibling,[W,H]=v(P.nextSibling);W.nextSibling;var le=ee.nextSibling,re=Z.nextSibling,$e=re.firstChild,me=re.nextSibling,[ge,ve]=v(me.nextSibling);return c(g,()=>e.element.isBackground?"🌫️":"✨"),c(f,()=>e.element.isBackground?"背景文字":"前景文字"),se(_,"click",e.onDuplicate,!0),se(B,"click",e.onDelete,!0),p.$$input=U=>e.onUpdate({text:U.currentTarget.value}),c(O,z(Te,{get color(){return e.element.color},onChange:U=>e.onUpdate({color:U})}),a,u),c(i,()=>e.element.fontSize,b,d),o.$$input=U=>e.onUpdate({fontSize:parseInt(U.currentTarget.value)}),c(S,()=>e.element.fontWeight,D,E),F.$$input=U=>e.onUpdate({fontWeight:parseInt(U.currentTarget.value)}),c(V,()=>Math.round(e.element.opacity*100),Q,$),L.$$input=U=>e.onUpdate({opacity:parseFloat(U.currentTarget.value)}),c(ee,()=>e.element.rotation,W,H),le.$$input=U=>e.onUpdate({rotation:parseInt(U.currentTarget.value)}),re.$$click=()=>n(!r()),c($e,()=>r()?"🔼":"🔽"),c(s,(()=>{var U=he(()=>!!r());return()=>U()&&(()=>{var fe=w(It),de=fe.firstChild,ce=de.firstChild,_e=ce.firstChild,pe=_e.nextSibling,[ue,ye]=v(pe.nextSibling);ue.nextSibling;var ae=ce.nextSibling,Pe=de.nextSibling,qe=Pe.firstChild,Se=qe.nextSibling,Ge=Se.firstChild,He=Ge.nextSibling,[Je,Ve]=v(He.nextSibling),Be=Se.nextSibling,we=Be.firstChild,Qe=we.firstChild,Ze=Qe.nextSibling,[Oe,et]=v(Ze.nextSibling);Oe.nextSibling;var De=we.nextSibling,Me=Be.nextSibling,Ce=Me.firstChild,tt=Ce.firstChild,lt=tt.nextSibling,[Ae,nt]=v(lt.nextSibling);Ae.nextSibling;var Ue=Ce.nextSibling,it=Me.nextSibling,ke=it.firstChild,rt=ke.firstChild,at=rt.nextSibling,[ze,st]=v(at.nextSibling);ze.nextSibling;var Ie=ke.nextSibling,Re=Pe.nextSibling,ot=Re.firstChild,dt=ot.nextSibling,Ne=dt.firstChild,ct=Ne.nextSibling,ut=Re.nextSibling,bt=ut.firstChild,gt=bt.nextSibling;return c(ce,()=>e.element.blur.toFixed(1),ue,ye),ae.$$input=Y=>e.onUpdate({blur:parseFloat(Y.currentTarget.value)}),c(Se,z(Te,{get color(){return e.element.shadowColor},onChange:Y=>e.onUpdate({shadowColor:Y})}),Je,Ve),c(we,()=>e.element.shadowOffsetX,Oe,et),De.$$input=Y=>e.onUpdate({shadowOffsetX:parseInt(Y.currentTarget.value)}),c(Ce,()=>e.element.shadowOffsetY,Ae,nt),Ue.$$input=Y=>e.onUpdate({shadowOffsetY:parseInt(Y.currentTarget.value)}),c(ke,()=>e.element.shadowBlur,ze,st),Ie.$$input=Y=>e.onUpdate({shadowBlur:parseInt(Y.currentTarget.value)}),Ne.$$click=()=>e.onUpdate({isBackground:!0,blur:2.5,opacity:.6,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0}),ct.$$click=()=>e.onUpdate({isBackground:!1,blur:0,opacity:1,shadowOffsetX:3,shadowOffsetY:3,shadowBlur:6}),c(gt,()=>["#3b82f6","#ec4899","#10b981","#f59e0b","#8b5cf6","#ef4444","#06b6d4","#84cc16"].map(Y=>(()=>{var be=w(Rt);return be.$$click=()=>e.onUpdate({color:Y}),Y!=null?be.style.setProperty("background-color",Y):be.style.removeProperty("background-color"),xe(be,"title",Y),G(),be})())),T(()=>I(ae,"value",e.element.blur)),T(()=>I(De,"value",e.element.shadowOffsetX)),T(()=>I(Ue,"value",e.element.shadowOffsetY)),T(()=>I(Ie,"value",e.element.shadowBlur)),G(),fe})()})(),ge,ve),T(()=>I(p,"value",e.element.text)),T(()=>I(o,"value",e.element.fontSize)),T(()=>I(F,"value",e.element.fontWeight)),T(()=>I(L,"value",e.element.opacity)),T(()=>I(le,"value",e.element.rotation)),G(),s})()}oe(["click","input"]);var Ft=C('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"><div class="glass-panel p-6 max-w-md w-full mx-4 space-y-6"><div class="flex items-center justify-between"><h3 class="text-xl font-cyber font-bold text-soft-blue">添加文字</h3><button class="text-gray-400 hover:text-white transition-colors"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class=space-y-3><label class="block text-sm font-medium text-gray-300">选择文字类型</label><div class="grid grid-cols-2 gap-3"><button><div class="text-center space-y-2"><div class=text-2xl>🌫️</div><div class=font-semibold>背景文字</div><div class="text-xs opacity-75">模糊效果，低透明度</div></div></button><button><div class="text-center space-y-2"><div class=text-2xl>✨</div><div class=font-semibold>前景文字</div><div class="text-xs opacity-75">清晰显示，带阴影</div></div></button></div></div><form class=space-y-4><div><label class="block text-sm font-medium text-gray-300 mb-2">输入文字内容</label><input type=text class="w-full px-4 py-3 bg-slate-800/50 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"autofocus></div><button type=submit>添加<!$><!/>文字</button></form><div class=space-y-3><label class="block text-sm font-medium text-gray-300">快速添加预设文字</label><div class="grid grid-cols-3 gap-2"></div></div><div><div class="text-sm text-gray-300"><strong><!$><!/>特点：</strong><ul class="mt-1 space-y-1 text-xs">'),Lt=C("<button>"),Yt=C("<li>• 自动应用模糊效果"),jt=C("<li>• 透明度较低，不抢夺视觉焦点"),Xt=C("<li>• 字体较大，营造层次感"),Kt=C("<li>• 颜色偏暗，融入背景"),Wt=C("<li>• 清晰显示，突出重点"),qt=C("<li>• 自动添加阴影效果"),Gt=C("<li>• 颜色鲜明，吸引注意"),Ht=C("<li>• 完全不透明，确保可读性");function Jt(e){const[r,n]=q("foreground"),[s,h]=q(""),m=_=>{_.preventDefault(),s().trim()&&(e.onAddText(r(),s().trim()),h(""))},g=_=>{e.onAddText(r(),_)},f=["BACKGROUND","CYBER","MATRIX","DIGITAL","FUTURE","TECH"],M=["TITLE","HERO","MAIN","FOCUS","BRAND","LOGO"];return(()=>{var _=w(Ft),B=_.firstChild,j=B.firstChild,k=j.firstChild,p=k.nextSibling,O=j.nextSibling,t=O.firstChild,l=t.nextSibling,a=l.firstChild,u=a.nextSibling,x=O.nextSibling,i=x.firstChild,R=i.firstChild,N=R.nextSibling,b=i.nextSibling,d=b.firstChild,o=d.nextSibling,[y,S]=v(o.nextSibling);y.nextSibling;var A=x.nextSibling,X=A.firstChild,D=X.nextSibling,E=A.nextSibling,F=E.firstChild,K=F.firstChild,V=K.firstChild,[J,te]=v(V.nextSibling);J.nextSibling;var Q=K.nextSibling;return se(p,"click",e.onClose,!0),a.$$click=()=>n("background"),u.$$click=()=>n("foreground"),x.addEventListener("submit",m),N.$$input=$=>h($.currentTarget.value),c(b,()=>r()==="background"?"背景":"前景",y,S),c(D,()=>(r()==="background"?f:M).map($=>(()=>{var L=w(Lt);return L.$$click=()=>g($),c(L,$),T(()=>ne(L,`px-3 py-2 text-sm rounded-lg border transition-all duration-200 ${r()==="background"?"border-blue-400/50 bg-blue-500/10 text-blue-300 hover:bg-blue-500/20 hover:border-blue-400":"border-purple-400/50 bg-purple-500/10 text-purple-300 hover:bg-purple-500/20 hover:border-purple-400"}`)),G(),L})())),c(K,()=>r()==="background"?"背景文字":"前景文字",J,te),c(Q,(()=>{var $=he(()=>r()==="background");return()=>$()?[w(Yt),w(jt),w(Xt),w(Kt)]:[w(Wt),w(qt),w(Gt),w(Ht)]})()),T($=>{var L=`p-4 rounded-lg border-2 transition-all duration-200 ${r()==="background"?"border-blue-500 bg-blue-500/20 text-blue-300 shadow-[0_0_15px_rgba(59,130,246,0.3)]":"border-slate-600 bg-slate-800/30 text-gray-300 hover:border-blue-400"}`,Z=`p-4 rounded-lg border-2 transition-all duration-200 ${r()==="foreground"?"border-purple-500 bg-purple-500/20 text-purple-300 shadow-[0_0_15px_rgba(147,51,234,0.3)]":"border-slate-600 bg-slate-800/30 text-gray-300 hover:border-purple-400"}`,ee=r()==="background"?"输入背景文字...":"输入前景文字...",ie=!s().trim(),P=`w-full py-3 px-4 rounded-lg font-semibold transition-all duration-200 ${s().trim()?r()==="background"?"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white shadow-[0_0_15px_rgba(59,130,246,0.3)]":"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white shadow-[0_0_15px_rgba(147,51,234,0.3)]":"bg-slate-700 text-gray-400 cursor-not-allowed"}`,W=`p-3 rounded-lg border-l-4 ${r()==="background"?"border-blue-500 bg-blue-500/10":"border-purple-500 bg-purple-500/10"}`,H=r()==="background"?"text-blue-300":"text-purple-300";return L!==$.e&&ne(a,$.e=L),Z!==$.t&&ne(u,$.t=Z),ee!==$.a&&xe(N,"placeholder",$.a=ee),ie!==$.o&&I(b,"disabled",$.o=ie),P!==$.i&&ne(b,$.i=P),W!==$.n&&ne(E,$.n=W),H!==$.s&&ne(K,$.s=H),$},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),T(()=>I(N,"value",s())),G(),_})()}oe(["click","input"]);var Vt=C('<main class=min-h-screen><!$><!/><div class="container mx-auto px-4 py-8"><header class="text-center mb-8"><h1 class="text-4xl md:text-6xl font-cyber font-bold text-3d-effect glow-text mb-4">CYBER 3D POSTER</h1><p class="text-lg text-gray-300 font-tech">创建令人惊艳的赛博朋克风格3D文字海报</p></header><div class="grid grid-cols-1 lg:grid-cols-4 gap-6"><div class="lg:col-span-1 space-y-4"><!$><!/><div class="glass-panel p-4"><h3 class="text-lg font-cyber font-bold text-soft-blue mb-4">文字图层</h3><div class="space-y-2 max-h-60 overflow-y-auto custom-scrollbar"></div></div></div><div class=lg:col-span-2><div class="glass-panel p-6"></div></div><div class=lg:col-span-1></div></div></div><!$><!/>'),Qt=C('<div><div class="flex items-center justify-between"><div class="flex items-center space-x-2"><span class=text-xs></span><span class="text-sm font-medium truncate"></span></div><div class="flex space-x-1"><button class="text-xs text-gray-400 hover:text-blue-400"title=复制>📋</button><button class="text-xs text-gray-400 hover:text-red-400"title=删除>🗑️</button></div></div><div class="text-xs text-gray-400 mt-1"><!$><!/> • <!$><!/>px');function el(){const[e,r]=q({width:800,height:600}),[n,s]=q("#0500FB"),[h,m]=q([{id:"demo-bg",text:"CYBER",x:400,y:250,fontSize:120,fontWeight:900,color:"#000000",isBackground:!0,blur:2,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"#000000",rotation:0,opacity:.6},{id:"demo-fg",text:"3D",x:400,y:350,fontSize:140,fontWeight:900,color:"#FE0191",isBackground:!1,blur:0,shadowOffsetX:4,shadowOffsetY:4,shadowBlur:8,shadowColor:"#1e293b",rotation:0,opacity:1}]),[g,f]=q(null),[M,_]=q(!1),[B,j]=q({x:0,y:0}),[k,p]=q(!1),O=[{bg:"#1e293b",fg:"#3b82f6",name:"深蓝灰 + 蓝色"},{bg:"#374151",fg:"#ec4899",name:"深灰 + 粉色"},{bg:"#1f2937",fg:"#10b981",name:"深灰 + 绿色"},{bg:"#312e81",fg:"#fbbf24",name:"深紫 + 黄色"},{bg:"#7c2d12",fg:"#06b6d4",name:"深橙 + 青色"},{bg:"#581c87",fg:"#22c55e",name:"深紫 + 绿色"},{bg:"#991b1b",fg:"#60a5fa",name:"深红 + 蓝色"},{bg:"#0c4a6e",fg:"#f59e0b",name:"深蓝 + 橙色"}],t=(b,d)=>{const o=b==="background",y=h();let S,A,X=0;do S=Math.random()*(e().width-200)+100,A=Math.random()*(e().height-100)+50,X++;while(X<10&&y.some(E=>Math.abs(E.x-S)<100&&Math.abs(E.y-A)<50));const D={id:`text-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,text:d,x:S,y:A,fontSize:o?100:80,fontWeight:o?900:700,color:o?i(n(),-40):"#3b82f6",isBackground:o,blur:o?2.5:0,shadowOffsetX:o?0:3,shadowOffsetY:o?0:3,shadowBlur:o?0:6,shadowColor:n(),rotation:0,opacity:o?.6:1};m([...h(),D]),f(D.id),p(!1)},l=(b,d)=>{m(o=>o.map(y=>y.id===b?{...y,...d}:y))},a=b=>{m(d=>d.filter(o=>o.id!==b)),g()===b&&f(null)},u=b=>{const d=h().find(o=>o.id===b);if(d){const o={...d,id:`text-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,x:d.x+20,y:d.y+20};m([...h(),o]),f(o.id)}},x=b=>{s(b.bg),m(d=>d.map(o=>({...o,color:o.isBackground?i(b.bg,-40):b.fg,shadowColor:b.bg})))},i=(b,d)=>{const o=b.replace("#",""),y=Math.max(0,Math.min(255,parseInt(o.substr(0,2),16)+d)),S=Math.max(0,Math.min(255,parseInt(o.substr(2,2),16)+d)),A=Math.max(0,Math.min(255,parseInt(o.substr(4,2),16)+d));return`#${y.toString(16).padStart(2,"0")}${S.toString(16).padStart(2,"0")}${A.toString(16).padStart(2,"0")}`},R=()=>{const b=document.querySelector("canvas");if(b){const d=document.createElement("a");d.download="cyber-3d-poster.png",d.href=b.toDataURL(),d.click()}},N=()=>{confirm("确定要清空所有文字吗？")&&(m([]),f(null))};return(()=>{var b=w(Vt),d=b.firstChild,[o,y]=v(d.nextSibling),S=o.nextSibling,A=S.firstChild,X=A.nextSibling,D=X.firstChild,E=D.firstChild,[F,K]=v(E.nextSibling),V=F.nextSibling,J=V.firstChild,te=J.nextSibling,Q=D.nextSibling,$=Q.firstChild,L=Q.nextSibling,Z=S.nextSibling,[ee,ie]=v(Z.nextSibling);return c(b,z(St,{get children(){return z(kt,{children:"Cyber 3D 海报生成器"})}}),o,y),c(D,z(Ut,{get canvasSize(){return e()},onCanvasSizeChange:r,get backgroundColor(){return n()},onBackgroundColorChange:s,colorPresets:O,onApplyPreset:x,onAddText:()=>p(!0),onExport:R,onClearAll:N}),F,K),c(te,z(Ke,{get each(){return h()},children:P=>(()=>{var W=w(Qt),H=W.firstChild,le=H.firstChild,re=le.firstChild,$e=re.nextSibling,me=le.nextSibling,ge=me.firstChild,ve=ge.nextSibling,U=H.nextSibling,fe=U.firstChild,[de,ce]=v(fe.nextSibling),_e=de.nextSibling,pe=_e.nextSibling,[ue,ye]=v(pe.nextSibling);return ue.nextSibling,W.$$click=()=>f(P.id),c(re,()=>P.isBackground?"🌫️":"✨"),c($e,()=>P.text),ge.$$click=ae=>{ae.stopPropagation(),u(P.id)},ve.$$click=ae=>{ae.stopPropagation(),a(P.id)},c(U,()=>P.isBackground?"背景层":"前景层",de,ce),c(U,()=>P.fontSize,ue,ye),T(()=>ne(W,`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${g()===P.id?P.isBackground?"border-blue-500 bg-blue-500/20":"border-purple-500 bg-purple-500/20":"border-slate-600 bg-slate-800/30 hover:border-slate-500"}`)),G(),W})()})),c($,z(Pt,{get canvasSize(){return e()},get backgroundColor(){return n()},get textElements(){return h()},get selectedElement(){return g()},onElementSelect:f,onElementUpdate:l,onElementDelete:a,get isDragging(){return M()},setIsDragging:_,get dragOffset(){return B()},setDragOffset:j})),c(L,z(Ee,{get when(){return g()},children:P=>{const W=()=>h().find(H=>H.id===P());return z(Ee,{get when(){return W()},children:H=>z(Nt,{get element(){return H()},onUpdate:le=>l(P(),le),onDelete:()=>a(P()),onDuplicate:()=>u(P())})})}})),c(b,z(Ee,{get when(){return k()},get children(){return z(Jt,{onAddText:t,onClose:()=>p(!1)})}}),ee,ie),b})()}oe(["click"]);export{el as default};
